<title>Robofest Timer</title>
<style>
  * {
    font-family: Arial, Helvetica, sans-serif;
    transition: .2s all ease-in-out;
  }

  .btn-group {
    display: flex;
  }


  .btn {
    flex: 1
  }

  btn-default: {
    background-color: gray
  }

  .big {
    font-size: 1.2em;
    border: none;
    border-radius: 4px;
  }

  .custom-dropdown {
    position: relative;
    display: inline-block;
    vertical-align: middle;
    margin: 10px;
    /* demo only */
  }

  .custom-dropdown select {
    background-color: #1abc9c;
    color: #fff;
    font-size: inherit;
    padding: .5em;
    padding-right: 2.5em;
    border: 0;
    margin: 0;
    border-radius: 3px;
    text-indent: 0.01px;
    text-overflow: '';
    -webkit-appearance: button;
    /* hide default arrow in chrome OSX */
  }

  .custom-dropdown::before,
  .custom-dropdown::after {
    content: "";
    position: absolute;
    pointer-events: none;
  }

  .custom-dropdown::after {
    /*  Custom dropdown arrow */
    content: "\25BC";
    height: 1em;
    font-size: .625em;
    line-height: 1;
    right: 1.2em;
    top: 50%;
    margin-top: -.5em;
  }

  .custom-dropdown::before {
    /*  Custom dropdown arrow cover */
    width: 2em;
    right: 0;
    top: 0;
    bottom: 0;
    border-radius: 0 3px 3px 0;
  }

  .custom-dropdown select[disabled] {
    color: rgba(0, 0, 0, .3);
  }

  .custom-dropdown select[disabled]::after {
    color: rgba(0, 0, 0, .1);
  }

  .custom-dropdown::before {
    background-color: rgba(0, 0, 0, .15);
  }

  .custom-dropdown::after {
    color: rgba(0, 0, 0, .4);
  }

  .footer {
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    background-color: transparent;
    color: white;
    text-align: right;
  }

  .createforms {
    border: none;
    border-bottom: 2px solid gray;
    padding-left: 2px;
    transition: 0.3s;
    border-radius: 4px;
  }

  .createforms:hover {
    background-color: #ededed;
    padding-left: 5px;
  }

  .createforms:focus {
    border-bottom: 2px solid red;
    background-color: #ededed;
    padding-left: 5px;
  }

  .createforms:disabled,
  .createforms:read-only {
    cursor: not-allowed;
    padding-left: 2px;
    transition: 0.3s;
  }

  .createforms:disabled:hover,
  .createforms:disabled:active,
  .createforms:read-only:hover,
  .createforms:read-only:active {
    cursor: not-allowed;
    background-color: red;
    padding-left: 5px;
    opacity: 0.6;
  }

  .text-danger {
    text-align: center;
  }

  .ready {
    animation-name: color;
    animation-duration: 1s;
    animation-iteration-count: infinite;
  }

  @keyframes color {
    0% {
      background-color: mediumseagreen
    }

    50% {
      background-color: seagreen;
    }
  }

  .almostdone {
    animation-name: colordone;
    animation-duration: 1.5s;
    animation-iteration-count: infinite;
  }

  .almostdoneup {
    animation-name: colordoneup;
    animation-duration: 1.5s;
    animation-iteration-count: infinite;
  }

  @keyframes colordone {
    0% {
      border-bottom-color: green;
      border-top-color: green;
      background-color: green
    }

    50% {
      border-bottom-color: orange;
      border-top-color: orange;
      background-color: orange;
    }
  }

  @keyframes colordoneup {
    0% {
      border-bottom-color: deeppink;
      border-top-color: deeppink;
      background-color: deeppink
    }

    50% {
      border-bottom-color: mediumpurple;
      border-top-color: mediumpurple;
      background-color: mediumpurple;
    }
  }

  .judgehelp {
    animation-name: color2;
    animation-duration: 1s;
    animation-iteration-count: infinite;
  }

  @keyframes color2 {
    0% {
      background-color: yellow
    }

    50% {
      background-color: red;
    }
  }


  .overlay {
    position: fixed;
    display: none;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 2;
  }

  .textoverlay {
    position: absolute;
    top: 50%;
    left: 50%;
    color: black;
    background-color: white;
    transform: translate(-50%, -50%);
    -ms-transform: translate(-50%, -50%);
  }

  .column {
    float: left;
    width: 50%;
    padding: 10px;
  }

  .timerstarted {
    animation-name: sizeuptimer;
    animation-duration: 1s;
    animation-iteration-count: 1;
  }

  .timerstopped {
    animation-name: sizedowntimer;
    animation-duration: 1s;
    animation-iteration-count: 1;
  }

  .timerstartedsm {
    animation-name: sizeuptimersm;
    animation-duration: 1s;
    animation-iteration-count: 1;
  }

  .timerstoppedsm {
    animation-name: sizedowntimersm;
    animation-duration: 1s;
    animation-iteration-count: 1;
  }

  .statustimeout {
    transition: width linear 1s;
  }

  @keyframes sizeuptimer {
    0% {
      font-size: 200px
    }

    100% {
      font-size: 300px
    }
  }

  @keyframes sizedowntimer {
    0% {
      font-size: 300px
    }

    100% {
      font-size: 200px
    }
  }

  @keyframes sizeuptimersm {
    0% {
      font-size: 200px
    }

    100% {
      font-size: 250px
    }
  }

  @keyframes sizedowntimersm {
    0% {
      font-size: 250px
    }

    100% {
      font-size: 200px
    }
  }

  /* Clear floats after the columns */
  .row:after {
    content: "";
    display: table;
    clear: both;
  }

  .ournavbar {
    display: none
  }

  .robofestmascot {
    position: fixed;
    bottom: 0;
    right: 0;
  }

  .robofestlogo {
    position: fixed;
    bottom: 0;
    left: 0;
  }

  .noselect {
    -webkit-touch-callout: none;
    /* iOS Safari */
    -webkit-user-select: none;
    /* Safari */
    -moz-user-select: none;
    /* Old versions of Firefox */
    -ms-user-select: none;
    /* Internet Explorer/Edge */
    user-select: none;
    /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
  }

  .invalidglow {
    box-shadow: 0 0 5px rgba(245, 66, 66, 1);
  }

  .flex_center {
    justify-content: center;
    display: flex;
    align-items: center;
  }

  .input {
    border: 2px solid black;
    border-radius: 24px;
    padding: 5px 10px;
    font-size: 20px;
    background-color: white;
  }

  .button {
    border: 2px solid transparent;
    border-radius: 64px;
    padding: 10px 10px;
    color: rgb(4, 4, 4);
    transition: .5s all ease-in-out;
  }

  .button:hover {
    border-radius: 16px;
    cursor: pointer;
  }

  .button-disabled {
    border: 2px solid transparent;
    border-radius: 64px;
    padding: 10px 10px;
    color: rgb(4, 4, 4);
    transition: .5s all ease-in-out;
    cursor: not-allowed;
    background-color: gray;
    opacity: .5;
  }

  .button-disabled:hover {
    border-radius: 20px;
    cursor: not-allowed;
  }

  .status {
    transition: .2s all linear
  }
</style>


<div
  style="background-color:#EEEEEE;border-radius:6px;border:20px solid #EEEEEE;z-index:-1;text-align:center;padding:10px;height:104vh"
  class="noselect">


  <div class="flex_center" style="width:100%">
    <div>
      <div style="background-color:black;width:70vw;height:18vw;border-radius:16px 16px 0px 0px" class="flex_center"
        id="timerbox">
        <div>
          <span id="timertext"
            style="color:white;font-size:12vw;font-family:Arial, Helvetica, sans-serif;font-weight:800;display:block"><span
              id="minutes">0</span><span id="separator">:</span><span id="seconds">00</span></span>
          <span
            style="color:white;font-size:2vw;font-family:Arial, Helvetica, sans-serif;font-weight:800;display:block;margin-top:-20px;margin-bottom:20px"
            id="message"></span>
        </div>

      </div>
      <div style="width:70vw;background-color:lightgray;border-radius:0px 0px 16px 16px;height:4vw">
        <div class="status" style="background-color:gray;width:100%;height:100%;border-radius:0px 0px 16px 16px">

        </div>
      </div>
    </div>


  </div>

  <div class="flex_center" style="margin-top:40px">

    <div class="button-disabled" style="background-color:green;width:100px;margin:0px 5px" id="start"
      onclick="startTimer()">
      <span style="color:white;font-weight:600">Start</span>
    </div>
    <div class="button-disabled" style="background-color:rgb(194, 194, 83);width:100px;margin:0px 5px" id="pause"
      onclick="pauseTimer()">
      <span style="color:white;font-weight:600">Pause</span>
    </div>
    <div class="button-disabled" style="background-color:red;width:100px;margin:0px 5px" id="stop"
      onclick="stopTimer()">
      <span style="color:white;font-weight:600">Stop</span>
    </div>


  </div>
  <div class="flex_center">
    <div style="width:60%;margin:40px 0px;border-top:2px dashed black">

    </div>
  </div>

  <div class="flex_center">
    <div style="margin:0px 40px">
      <div class="flex_center">
        <div style="margin:5px 10px">
          <span style="font-size:14px;display:block;text-align:left;margin:4px;margin-left:5px">Minutes</span>
          <input class="input" placeholder="0" id="minutesi" style="width:100px;display:block" type="number" />
        </div>
        <span style="margin-top:20px">:</span>
        <div style="margin:5px 10px">
          <span style="font-size:14px;display:block;text-align:left;margin:4px;margin-left:5px">Seconds</span>
          <input class="input" placeholder="0" id="secondsi" style="width:100px;display:block" type="number" />
        </div>



      </div>
      <div style="margin:5px 10px">
        <span style="font-size:14px;display:block;text-align:left;margin:4px;margin-left:5px">Timer Label</span>
        <input class="input" placeholder="Pit Proctoring!" id="messagei" style="width:225px;display:block" />
      </div>
      <div class="flex_center" style="margin-top:20px">
        <div class="button" style="background-color:gray;width:80%" onclick="setTimerByInput()">
          <span style="color:white;font-weight:600">Set Timer</span>
        </div>
      </div>

    </div>
    <div style="margin:0px 40px">
      <div class="flex_center" style="margin-bottom:10px;background-color:lightgray;padding:10px;border-radius:40px">
        <div class="button" style="background-color:hotpink;width:200px;margin:0px 5px" id="countdown"
          onclick="switchMode('countdown')">
          <span style="color:white;font-weight:600">Countdown Mode</span>
        </div>
        <div class="button" style="background-color:gray;width:200px;margin:0px 5px" id="stopwatch"
          onclick="switchMode('stopwatch')">
          <span style="color:white;font-weight:600">Countup Mode</span>
        </div>

      </div>
      <div id="presets">
        <div class="flex_center">
          <div>
            <div class="button" style="padding:5px 10px;background-color:cornflowerblue;margin:4px;width:200px"
              onclick="setTimerLength(120, 'GAME Match')">
              <span style="color:white;font-weight:600">GAME Match Preset</span>
            </div>
            <div class="button" style="padding:5px 10px;background-color:cornflowerblue;margin:4px;width:200px"
              onclick="setTimerLength(300, 'Timeout')">
              <span style="color:white;font-weight:600">Timeout Preset</span>
            </div>
            <div class="button" style="padding:5px 10px;background-color:cornflowerblue;margin:4px;width:200px"
              onclick="setTimerLength(1800, 'Pit Work Time')">
              <span style="color:white;font-weight:600">Pit Work Preset</span>
            </div>
          </div>
          <div>
            <div class="button" style="padding:5px 10px;background-color:cornflowerblue;margin:4px;width:200px"
              onclick="setTimerLength(240, 'Presentation')">
              <span style="color:white;font-weight:600">Presentation Preset</span>
            </div>
            <div class="button" style="padding:5px 10px;background-color:cornflowerblue;margin:4px;width:200px"
              onclick="setTimerLength(60, 'Q&A Period')">
              <span style="color:white;font-weight:600">Q&A Preset</span>
            </div>
            <div class="button" style="padding:5px 10px;background-color:cornflowerblue;margin:4px;width:200px"
              onclick="setTimerLength(60, 'Team Introduction')">
              <span style="color:white;font-weight:600">Team Intro Preset</span>
            </div>
          </div>
        </div>

      </div>
    </div>



  </div>

  <audio src="/images/TimerFinished.wav" id="timerdone"></audio>

</div>
<div class="robofestmascot noselect">
  <img src="/images/robofestMascot_transp.png" style="width:160px;margin-right:10px;margin-bottom:10px" />
</div>
<div class="robofestlogo noselect">
  <img src="/images/robofest_words_transparent.png" style="width:240px;margin-left:20px;margin-bottom:20px" />
</div>
<div class="overlay" style="display:none" id="about">
  <div class="textoverlay" style="background-color:white;padding:20px;border-radius:6px;text-align:center">
    <span style="font-size:24px;font-weight:bold;text-align:center">About This App</span><br /><br />
    <span style="font-size:16px;text-align:center">This Robofest online timer was created by David Reeves, a student of
      the class of 2023. The app was developed in ASP.NET, JS, HTML, and CSS, but uses mostly just static content due to
      it's disconnect from C#. This app was actually originally an idea to create an entire online scoring system for
      the GAME competition of Robofest, but was eventually revised to the simplistic timer that is on this webpage. I am
      personally hoping to make an intricate system that is dynamic and easy to use in the future, but there might be
      some <i>development</i> needed in my programming skills. Thanks so much for visiting, and have a nice
      day!!</span><br /><br />
    <input type="button" value="OK" id="aboutExit"
      style="background-color:#f542ec;width:90px;padding:10px;color:white;font-weight:600;border:none;border-radius:8px;display:inline-block" />
  </div>
</div>

<script>
  var mode = "countdown";
  var stopwatchStash = 0;

  var starttime = undefined;
  var timeLeft = 0;
  var totalTime = 0;
  var endtime = undefined;
  var started = false;

  function fullscreen() {
    var elem = document.getElementById("timerfullscreen");
    elem.webkitRequestFullscreen();

    // finally the standard version
    elem.requestFullscreen();
  }

  function switchMode(modeTo) {
    if (started) {
      return;
    }
    mode = modeTo;

    if (mode == "stopwatch") {
      document.getElementById("start").classList = "button-disabled";
      document.getElementById("pause").classList = "button-disabled";
      document.getElementById("stop").classList = "button-disabled";
      //document.getElementById("presets").style.display = "none";
      document.getElementById("countdown").style.backgroundColor = "gray";
      document.getElementById("stopwatch").style.backgroundColor = "hotpink";
    } else if (mode == "countdown") {
      document.getElementById("start").classList = "button-disabled";
      document.getElementById("pause").classList = "button-disabled";
      document.getElementById("stop").classList = "button-disabled";
      //document.getElementById("presets").style.display = "";
      document.getElementById("countdown").style.backgroundColor = "hotpink";
      document.getElementById("stopwatch").style.backgroundColor = "gray";
    }

  }

  function setTimerLength(seconds, message) {
    totalTime = seconds;
    timeLeft = seconds;

    var minutes = Math.floor(seconds / 60);
    var seconds = seconds % 60;

    if (mode == 'stopwatch') {
      message += ` (Out of ${minutes}:${seconds.toString().padStart(2, "0")})`
      document.getElementById("minutes").innerHTML = "0";
      document.getElementById("seconds").innerHTML = "00";
    } else {
      document.getElementById("minutes").innerHTML = minutes;
      if (minutes > 999) {
        document.getElementById("seconds").innerHTML = "";
        document.getElementById("separator").innerHTML = "m";
      } else {
        document.getElementById("seconds").innerHTML = Math.floor(seconds).toString().padStart(2, "0");
        document.getElementById("separator").innerHTML = ":";
      }

    }
    document.getElementById("message").innerHTML = message;



    if (!(started && timeLeft > 0)) {
      document.getElementById("start").classList = "button";
      document.getElementById("pause").classList = "button-disabled";
      document.getElementById("stop").classList = "button-disabled";
    }
  }

  function setTimerByInput() {
    var minutes = parseInt(document.getElementById("minutesi").value);
    var seconds = parseInt(document.getElementById("secondsi").value);

    var message = document.getElementById("messagei").value;





    if (mode == "stopwatch") {
      if (isNaN(minutes) && isNaN(seconds)) {
        minutes = 99;
      } else if (isNaN(minutes)) {
        minutes = 0;
      }
      if (isNaN(seconds) && isNaN(minutes)) {
        seconds = 59;
      } else if (isNaN(seconds)) {
        seconds = 0;
      }

    } else {
      if (isNaN(minutes)) {
        minutes = 0;
      }
      if (isNaN(seconds)) {
        seconds = 0;
      }
    }

    document.getElementById("minutesi").value = "";
    document.getElementById("secondsi").value = "";
    document.getElementById("messagei").value = "";





    setTimerLength(minutes * 60 + seconds, message);
  }

  function startTimer() {

    if (document.getElementById("start").classList.contains("button-disabled")) {
      return;
    }

    starttime = new Date();
    endtime = new Date(starttime.getTime() + timeLeft * 1000);
    started = true;


    document.getElementById("start").classList = "button-disabled";
    document.getElementById("pause").classList = "button";
    document.getElementById("stop").classList = "button";

    document.getElementById("timerbox").style.height = "28vw";
    document.getElementById("timertext").style.fontSize = "20vw";
  }

  function pauseTimer() {
    if (document.getElementById("pause").classList.contains("button-disabled")) {
      return;
    }
    stopwatchStash = timeLeft;

    timeLeft = timeLeft - (new Date() - starttime) / 1000;


    starttime = undefined;
    endtime = undefined;
    started = false;
    updateStatusBar();

    document.getElementById("start").classList = "button";
    document.getElementById("pause").classList = "button-disabled";
    document.getElementById("stop").classList = "button";
  }

  function stopTimer() {
    if (document.getElementById("stop").classList.contains("button-disabled")) {
      return;
    }
    timeLeft = 0;
    starttime = undefined;
    endtime = undefined;
    started = false;
    stopwatchStash = 0;
    updateStatusBar();

    document.getElementById("start").classList = "button-disabled";
    if (mode == "stopwatch") {
      document.getElementById("start").classList = "button";
    }
    document.getElementById("pause").classList = "button-disabled";
    document.getElementById("stop").classList = "button-disabled";
    document.getElementById("timertext").style.fontSize = "12vw";
    document.getElementById("timerbox").style.height = "18vw";

    document.getElementById("minutes").innerHTML = "0";
    document.getElementById("seconds").innerHTML = "00";
    document.getElementById("message").innerHTML = "";

  }

  function updateStatusBar() {
    Array.from(document.getElementsByClassName("status")).forEach(function (element) {
      if (started) {
        if (mode == "stopwatch") {
          element.style.backgroundColor = (totalTime - timeLeft) / totalTime < .85 ? "green" : "orange";
        } else {
          element.style.backgroundColor = timeLeft / totalTime > .15 ? "green" : "orange";
        }

      } else {
        element.style.backgroundColor = "gray";
      }


      if (timeLeft > 0) {
        if (mode == "stopwatch") {
          element.style.width = ((totalTime - timeLeft) / totalTime * 100) + "%";
        } else {
          element.style.width = (timeLeft / totalTime * 100) + "%";
        }

      } else {
        element.style.backgroundColor = started ? "red" : "gray";
        element.style.width = "100%";
      }

    })
  }



  setInterval(function () {
    if (started) {




      if (timeLeft <= 0) {
        timeLeft = 0;
        starttime = undefined;
        endtime = undefined;
        document.getElementById("minutes").innerHTML = "0";
        document.getElementById("seconds").innerHTML = "00";
        document.getElementById("start").classList = "button-disabled";
        document.getElementById("pause").classList = "button-disabled";
        document.getElementById("stop").classList = "button";

        document.getElementById("timerdone").play();
      } else {
        if (mode == "countdown") {
          timeLeft = timeLeft - (new Date() - starttime) / 1000;
          starttime = new Date();
          var minutes = Math.floor(timeLeft / 60);
          var seconds = timeLeft % 60;



          document.getElementById("minutes").innerHTML = minutes;
          if (minutes > 999) {
            document.getElementById("seconds").innerHTML = "";
            document.getElementById("separator").innerHTML = "m";
          }
          else {
            document.getElementById("seconds").innerHTML = Math.floor(seconds).toString().padStart(2, "0");
            document.getElementById("separator").innerHTML = ":";
          }
          if (minutes < 0 || seconds < 0) {
            document.getElementById("minutes").innerHTML = "0";
            document.getElementById("seconds").innerHTML = "00";
          }
        } else if (mode == "stopwatch") {
          timeLeft = timeLeft - (new Date() - starttime) / 1000;
          starttime = new Date();
          var minutes = Math.floor((totalTime - timeLeft) / 60);
          var seconds = (totalTime - timeLeft) % 60;



          document.getElementById("minutes").innerHTML = minutes;
          if (minutes > 999) {
            document.getElementById("seconds").innerHTML = "";
            document.getElementById("separator").innerHTML = "m";
          }
          else {
            document.getElementById("seconds").innerHTML = Math.floor(seconds).toString().padStart(2, "0");
            document.getElementById("separator").innerHTML = ":";
          }
          if (minutes < 0 || seconds < 0) {
            document.getElementById("minutes").innerHTML = "0";
            document.getElementById("seconds").innerHTML = "00";
          }
        }


      }
      updateStatusBar();


    } else {

    }
  }, 50)

</script>